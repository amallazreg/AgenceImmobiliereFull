<app-navbar></app-navbar>

<body>
  <div class="container" id="container">
    
    <!-- Header Section -->
    <div class="header-section">
      <h1 class="main-title">Discover Your Dream Property</h1>
      <p class="subtitle">Browse through our exclusive collection of properties</p>
    </div>

    <!-- Filters Section -->
    <div class="filters-wrapper">
      <div class="filter-options">
        <label class="filter-label" [class.active]="selectedFilter === 'all'">
          <input type="radio" name="transactionType" value="all" (change)="filterAnnonces('all')" [checked]="selectedFilter === 'all'">
          <span class="filter-text">
            <i class="fas fa-th"></i>
            All Properties
          </span>
        </label>
        <label class="filter-label" [class.active]="selectedFilter === 'a vendre'">
          <input type="radio" name="transactionType" value="a vendre" (change)="filterAnnonces('a vendre')" [checked]="selectedFilter === 'a vendre'">
          <span class="filter-text">
            <i class="fas fa-tag"></i>
            For Sale
          </span>
        </label>
        <label class="filter-label" [class.active]="selectedFilter === 'a louer'">
          <input type="radio" name="transactionType" value="a louer" (change)="filterAnnonces('a louer')" [checked]="selectedFilter === 'a louer'">
          <span class="filter-text">
            <i class="fas fa-key"></i>
            For Rent
          </span>
        </label>
      </div>

      <!-- Search Bar -->
      <div class="search-bar">
        <i class="fas fa-search search-icon"></i>
        <input type="text" placeholder="Search by location, type, or keywords..." [(ngModel)]="searchQuery" (input)="searchAnnonces()">
      </div>
    </div>

    <!-- Properties Grid -->
    <div class="properties-grid">
      <div class="property-card" *ngFor="let annonce of paginatedAnnonces">
        
        <!-- Image Container -->
        <div class="image-container">
          <img *ngIf="annonce.photos && annonce.photos.length > 0" 
               [src]="transformPath(annonce.photos[0])" 
               [alt]="annonce.titre" 
               class="property-image">
          <div class="property-badge">
            <span class="badge-text">{{ annonce.type }}</span>
          </div>
        </div>

        <!-- Property Details -->
        <div class="property-content">
          
          <!-- Title -->
          <h3 class="property-title">{{ annonce.titre }}</h3>

          <!-- Price -->
          <div class="property-price">
            <span class="price-value">{{ annonce.prix }} 000 TND </span>
            <span class="price-period">{{ annonce.type === 'a louer' ? '/month' : '' }}</span>
          </div>

          <!-- Location -->
          <div class="property-info-item location">
            <i class="fas fa-map-marker-alt"></i>
            <span>{{ annonce.adresse }}</span>
          </div>

          <!-- Property Features -->
          <div class="property-features">
            <div class="feature-item">
              <i class="fas fa-expand-arrows-alt"></i>
              <span>{{ annonce.surface }}</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-lightbulb"></i>
              <span>{{ annonce.disponibilite }}</span>
            </div>
          </div>

          <!-- Description Preview -->
          <div class="property-description">
            <p>{{ annonce.description }}</p>
          </div>

          <!-- Contact Info -->
          <div class="property-contact">
            <i class="fas fa-phone"></i>
            <span>{{ annonce.coordonnes }}</span>
          </div>

          <!-- Action Button -->
          <a class="btn-details" 
             [routerLink]="['/detailsAnnouce', annonce._id]" 
             role="button">
            <span>View Details</span>
            <i class="fas fa-arrow-right"></i>
          </a>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <nav class="pagination-wrapper" aria-label="Page navigation">
      <ul class="pagination">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <a class="page-link" href="#" (click)="changePage(currentPage - 1); $event.preventDefault()" aria-label="Previous">
            <i class="fas fa-chevron-left"></i>
          </a>
        </li>
        <li class="page-item" *ngFor="let page of totalPagesArray" [class.active]="page === currentPage">
          <a class="page-link" href="#" (click)="changePage(page); $event.preventDefault()">{{ page }}</a>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <a class="page-link" href="#" (click)="changePage(currentPage + 1); $event.preventDefault()" aria-label="Next">
            <i class="fas fa-chevron-right"></i>
          </a>
        </li>
      </ul>
    </nav>

  </div>

  <app-footer></app-footer>
</body>